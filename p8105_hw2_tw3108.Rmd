---
title: "p8105_hw2_tw3108"
author: "Tao Wu"
date: "2025-10-01"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r,message=FALSE,warning=FALSE}
library(tidyverse)
pols <- read_csv("data/pols-month.csv")
snp  <- read_csv("data/snp.csv")
unemp <- read_csv("data/unemployment.csv")
newpols <- pols %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(
    month = as.integer(month),
    month = month.name[month],
    president = if_else(prez_gop == 1, "gop", "dem")
  ) %>%
  select(-prez_gop, -prez_dem, -day)
newsnp <- snp %>%
 mutate(date = as.Date(date, format = "%m/%d/%y"),
    year = as.integer(format(date, "%Y")),
    month = as.integer(format(date, "%m")),
    month = month.name[month]
  ) %>%
  select(year, month, close) %>%    
  arrange(year, month)
newunemp <- unemp %>%
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "rate"
  ) %>%
  mutate(
    year  = as.integer(Year),
    month = month.name[match(month,month.abb)]
  ) %>%
  select(year, month, rate) %>%
  arrange(year,month)
newpols   <- newpols   %>% mutate(year = as.integer(year))
newsnp    <- newsnp    %>% mutate(year = as.integer(year))
newunemp  <- newunemp  %>% mutate(year = as.integer(year))
merged <- newpols %>%
  left_join(newsnp, by = c("year", "month"))
final <- merged %>%
  left_join(newunemp, by = c("year", "month"))
```

```{r,message=FALSE,warning=FALSE}
library(readxl)
library(dplyr)
mrtrash <- read_excel(
  "data/202409 Trash Wheel Collection Data.xlsx",
  sheet = "Mr. Trash Wheel",
  skip = 1,            
  range = readxl::cell_cols("A:M")        
) %>%
  filter(!is.na(Dumpster)) %>% 
  rename(
    weight_tons = `Weight (tons)`,
    volume_cubic_yards = `Volume (cubic yards)`,
    plastic_bottles = `Plastic Bottles`,
    polystyrene = Polystyrene,
    cigarette_butts = `Cigarette Butts`,
    glass_bottles = `Glass Bottles`,
    plastic_bags = `Plastic Bags`,
    wrappers = Wrappers,
    sports_balls = `Sports Balls`
  ) %>%
  mutate(
    sports_balls = as.integer(round(as.numeric(sports_balls)))
  )
```
